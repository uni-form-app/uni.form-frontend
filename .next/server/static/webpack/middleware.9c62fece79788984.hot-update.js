"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"(middleware)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function middleware(request) {\n    const cookie = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const token = cookie.get(\"token\")?.value;\n    // Verificar se o usuário já está na página de login, para não redirecionar novamente\n    const isLoginPage = request.nextUrl.pathname === '/login';\n    if (!token) {\n        if (isLoginPage) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next(); // Se já estiver na página de login, continue normalmente\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL('/login', request.url));\n    }\n    console.log(token);\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().decode(token);\n        const currentTime = Math.floor(Date.now() / 1000);\n        if (decoded.exp < currentTime) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL('/login', request.url));\n        }\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL('/login', request.url));\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next();\n}\nconst config = {\n    matcher: [\n        '/((?!api|_next/static|_next/image|favicon.ico).*)'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUM7QUFDaUI7QUFDekI7QUFTaEIsZUFBZUcsV0FBV0MsT0FBb0I7SUFDM0QsTUFBTUMsU0FBUyxNQUFNTCxxREFBT0E7SUFDNUIsTUFBTU0sUUFBUUQsT0FBT0UsR0FBRyxDQUFDLFVBQVVDO0lBRW5DLHFGQUFxRjtJQUNyRixNQUFNQyxjQUFjTCxRQUFRTSxPQUFPLENBQUNDLFFBQVEsS0FBSztJQUVqRCxJQUFJLENBQUNMLE9BQU87UUFDVixJQUFJRyxhQUFhO1lBQ2YsT0FBT1IscURBQVlBLENBQUNXLElBQUksSUFBSSx5REFBeUQ7UUFDdkY7UUFDQSxPQUFPWCxxREFBWUEsQ0FBQ1ksUUFBUSxDQUFDLElBQUlDLElBQUksVUFBVVYsUUFBUVcsR0FBRztJQUM1RDtJQUVBQyxRQUFRQyxHQUFHLENBQUNYO0lBRVosSUFBSTtRQUNGLE1BQU1ZLFVBQVVoQiwwREFBVSxDQUFDSTtRQUUzQixNQUFNYyxjQUFjQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtDLEdBQUcsS0FBSztRQUM1QyxJQUFJTixRQUFRTyxHQUFHLEdBQUdMLGFBQWE7WUFDN0IsT0FBT25CLHFEQUFZQSxDQUFDWSxRQUFRLENBQUMsSUFBSUMsSUFBSSxVQUFVVixRQUFRVyxHQUFHO1FBQzVEO0lBRUYsRUFBRSxPQUFPVyxPQUFPO1FBQ2QsT0FBT3pCLHFEQUFZQSxDQUFDWSxRQUFRLENBQUMsSUFBSUMsSUFBSSxVQUFVVixRQUFRVyxHQUFHO0lBQzVEO0lBRUEsT0FBT2QscURBQVlBLENBQUNXLElBQUk7QUFDMUI7QUFFTyxNQUFNZSxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7S0FDRDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIi9ob21lL2pvbmFzL1dvcmtzL3VuaS5mb3JtLWZyb250ZW5kL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIERlY29kZWRVc2VyIHtcbiAgZXhwOiBudW1iZXI7XG4gIGlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgY29va2llID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCB0b2tlbiA9IGNvb2tpZS5nZXQoXCJ0b2tlblwiKT8udmFsdWU7XG5cbiAgLy8gVmVyaWZpY2FyIHNlIG8gdXN1w6FyaW8gasOhIGVzdMOhIG5hIHDDoWdpbmEgZGUgbG9naW4sIHBhcmEgbsOjbyByZWRpcmVjaW9uYXIgbm92YW1lbnRlXG4gIGNvbnN0IGlzTG9naW5QYWdlID0gcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSAnL2xvZ2luJztcblxuICBpZiAoIXRva2VuKSB7XG4gICAgaWYgKGlzTG9naW5QYWdlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTsgLy8gU2UgasOhIGVzdGl2ZXIgbmEgcMOhZ2luYSBkZSBsb2dpbiwgY29udGludWUgbm9ybWFsbWVudGVcbiAgICB9XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvbG9naW4nLCByZXF1ZXN0LnVybCkpO1xuICB9XG5cbiAgY29uc29sZS5sb2codG9rZW4pO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC5kZWNvZGUodG9rZW4pIGFzIERlY29kZWRVc2VyO1xuXG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcbiAgICBpZiAoZGVjb2RlZC5leHAgPCBjdXJyZW50VGltZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvbG9naW4nLCByZXF1ZXN0LnVybCkpO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2xvZ2luJywgcmVxdWVzdC51cmwpKTtcbiAgfVxuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgJy8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljbykuKiknLFxuICBdLFxufTtcbiJdLCJuYW1lcyI6WyJjb29raWVzIiwiTmV4dFJlc3BvbnNlIiwiand0IiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJjb29raWUiLCJ0b2tlbiIsImdldCIsInZhbHVlIiwiaXNMb2dpblBhZ2UiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJuZXh0IiwicmVkaXJlY3QiLCJVUkwiLCJ1cmwiLCJjb25zb2xlIiwibG9nIiwiZGVjb2RlZCIsImRlY29kZSIsImN1cnJlbnRUaW1lIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsImV4cCIsImVycm9yIiwiY29uZmlnIiwibWF0Y2hlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});